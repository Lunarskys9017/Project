{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useRef, useState } from \"react\";\nimport { INJECTED_OWADS_ID, OWADS_URL } from \"../constants\";\nimport { log } from \"lib/log\";\nimport { isDev, sleep } from \"lib/utils\";\nexport function useOverwolfAds(_ref) {\n  _s();\n  let {\n    width,\n    height\n  } = _ref;\n  const containerRef = useRef(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isPlaying, setIsPlaying] = useState(false);\n  useEffect(() => {\n    if (width === 0 || height === 0) {\n      log(\"width === 0 || height === 0\", \"src/features/monetization/hooks/useOverwolfAds.ts\", \"useOverwolfAds\");\n      return;\n    }\n    let owAds;\n    function onOwAdReady() {\n      if (typeof window.OwAd === \"undefined\" || containerRef.current === null || isDev) {\n        return setIsLoading(false);\n      }\n      owAds = new window.OwAd(containerRef.current, {\n        size: {\n          width,\n          height\n        }\n      });\n      owAds.addEventListener(\"player_loaded \", () => {\n        log(\"player_loaded\", \"src/features/monetization/hooks/useOverwolfAds.ts\", \"useOverwolfAds\");\n      });\n      owAds.addEventListener(\"play\", () => {\n        setIsPlaying(true);\n      });\n\n      // owAds.addEventListener('display_ad_loaded', () => {\n      //   setIsPlaying(true);\n      // });\n\n      // owAds.addEventListener('impression', () => {\n      //   setIsPlaying(true);\n      // });\n\n      // owAds.addEventListener('complete', async () => {\n      //   await sleep(1000);\n      //   setIsPlaying(false);\n      // });\n      owAds.addEventListener(\"error\", async () => {\n        await sleep(1000);\n        setIsPlaying(false);\n      });\n    }\n    const script = document.createElement(\"script\");\n    script.id = INJECTED_OWADS_ID;\n    if (document.getElementById(INJECTED_OWADS_ID)) {\n      onOwAdReady();\n    } else {\n      script.src = OWADS_URL;\n      script.async = true;\n      document.body.appendChild(script);\n      script.onload = onOwAdReady;\n    }\n    return () => {\n      if (document.getElementById(INJECTED_OWADS_ID)) document.body.removeChild(script);\n      //remove event listeners if you enabled them\n      [\"player_loaded\", \"play\", \"display_ad_loaded\"].forEach(event => {\n        var _owAds;\n        (_owAds = owAds) === null || _owAds === void 0 ? void 0 : _owAds.removeEventListener(event, () => {});\n      });\n    };\n  }, [width, height]);\n  return {\n    isLoading,\n    containerRef,\n    isPlaying\n  };\n}\n_s(useOverwolfAds, \"Fhen4q8IqwsQGAsQvzeeCPPEzSY=\");","map":{"version":3,"names":["useEffect","useRef","useState","INJECTED_OWADS_ID","OWADS_URL","log","isDev","sleep","useOverwolfAds","_ref","_s","width","height","containerRef","isLoading","setIsLoading","isPlaying","setIsPlaying","owAds","onOwAdReady","window","OwAd","current","size","addEventListener","script","document","createElement","id","getElementById","src","async","body","appendChild","onload","removeChild","forEach","event","_owAds","removeEventListener"],"sources":["C:/Users/bryan/Desktop/Projects/my-app/src/features/monetization/hooks/useOverwolfAds.ts"],"sourcesContent":["import type { OwAd } from \"@overwolf/types/owads\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { INJECTED_OWADS_ID, OWADS_URL } from \"../constants\";\nimport { log } from \"lib/log\";\nimport { isDev, sleep } from \"lib/utils\";\n\ndeclare global {\n  interface Window {\n    OwAd?: typeof OwAd;\n  }\n}\n\nexport type UseOverwolfAds = Record<\"width\" | \"height\", number>;\n\nexport function useOverwolfAds({ width, height }: UseOverwolfAds) {\n  const containerRef = useRef<HTMLDivElement | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isPlaying, setIsPlaying] = useState(false);\n\n  useEffect(() => {\n    if (width === 0 || height === 0) {\n      log(\n        \"width === 0 || height === 0\",\n        \"src/features/monetization/hooks/useOverwolfAds.ts\",\n        \"useOverwolfAds\"\n      );\n\n      return;\n    }\n\n    let owAds: OwAd | undefined;\n    function onOwAdReady() {\n      if (\n        typeof window.OwAd === \"undefined\" ||\n        containerRef.current === null ||\n        isDev\n      ) {\n        return setIsLoading(false);\n      }\n      owAds = new window.OwAd(containerRef.current, {\n        size: { width, height },\n      });\n\n      owAds.addEventListener(\"player_loaded \", () => {\n        log(\n          \"player_loaded\",\n          \"src/features/monetization/hooks/useOverwolfAds.ts\",\n          \"useOverwolfAds\"\n        );\n      });\n\n      owAds.addEventListener(\"play\", () => {\n        setIsPlaying(true);\n      });\n\n      // owAds.addEventListener('display_ad_loaded', () => {\n      //   setIsPlaying(true);\n      // });\n\n      // owAds.addEventListener('impression', () => {\n      //   setIsPlaying(true);\n      // });\n\n      // owAds.addEventListener('complete', async () => {\n      //   await sleep(1000);\n      //   setIsPlaying(false);\n      // });\n      owAds.addEventListener(\"error\", async () => {\n        await sleep(1000);\n        setIsPlaying(false);\n      });\n    }\n\n    const script = document.createElement(\"script\");\n    script.id = INJECTED_OWADS_ID;\n\n    if (document.getElementById(INJECTED_OWADS_ID)) {\n      onOwAdReady();\n    } else {\n      script.src = OWADS_URL;\n      script.async = true;\n      document.body.appendChild(script);\n      script.onload = onOwAdReady;\n    }\n    return () => {\n      if (document.getElementById(INJECTED_OWADS_ID))\n        document.body.removeChild(script);\n      //remove event listeners if you enabled them\n      [\"player_loaded\", \"play\", \"display_ad_loaded\"].forEach((event) => {\n        owAds?.removeEventListener(event, () => {});\n      });\n    };\n  }, [width, height]);\n\n  return {\n    isLoading,\n    containerRef,\n    isPlaying,\n  };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}