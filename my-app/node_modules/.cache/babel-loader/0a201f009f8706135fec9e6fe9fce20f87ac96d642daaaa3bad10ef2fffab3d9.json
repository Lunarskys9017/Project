{"ast":null,"code":"import{useEffect,useRef,useState}from\"react\";import{INJECTED_OWADS_ID,OWADS_URL}from\"../constants\";import{log}from\"lib/log\";import{isDev,sleep}from\"lib/utils\";export function useOverwolfAds(_ref){let{width,height}=_ref;const containerRef=useRef(null);const[isLoading,setIsLoading]=useState(true);const[isPlaying,setIsPlaying]=useState(false);useEffect(()=>{if(width===0||height===0){log(\"width === 0 || height === 0\",\"src/features/monetization/hooks/useOverwolfAds.ts\",\"useOverwolfAds\");return;}let owAds;function onOwAdReady(){if(typeof window.OwAd===\"undefined\"||containerRef.current===null||isDev){return setIsLoading(false);}owAds=new window.OwAd(containerRef.current,{size:{width,height}});owAds.addEventListener(\"player_loaded \",()=>{log(\"player_loaded\",\"src/features/monetization/hooks/useOverwolfAds.ts\",\"useOverwolfAds\");});owAds.addEventListener(\"play\",()=>{setIsPlaying(true);});// owAds.addEventListener('display_ad_loaded', () => {\n//   setIsPlaying(true);\n// });\n// owAds.addEventListener('impression', () => {\n//   setIsPlaying(true);\n// });\n// owAds.addEventListener('complete', async () => {\n//   await sleep(1000);\n//   setIsPlaying(false);\n// });\nowAds.addEventListener(\"error\",async()=>{await sleep(1000);setIsPlaying(false);});}const script=document.createElement(\"script\");script.id=INJECTED_OWADS_ID;if(document.getElementById(INJECTED_OWADS_ID)){onOwAdReady();}else{script.src=OWADS_URL;script.async=true;document.body.appendChild(script);script.onload=onOwAdReady;}return()=>{if(document.getElementById(INJECTED_OWADS_ID))document.body.removeChild(script);//remove event listeners if you enabled them\n[\"player_loaded\",\"play\",\"display_ad_loaded\"].forEach(event=>{var _owAds;(_owAds=owAds)===null||_owAds===void 0?void 0:_owAds.removeEventListener(event,()=>{});});};},[width,height]);return{isLoading,containerRef,isPlaying};}","map":{"version":3,"names":["useEffect","useRef","useState","INJECTED_OWADS_ID","OWADS_URL","log","isDev","sleep","useOverwolfAds","_ref","width","height","containerRef","isLoading","setIsLoading","isPlaying","setIsPlaying","owAds","onOwAdReady","window","OwAd","current","size","addEventListener","script","document","createElement","id","getElementById","src","async","body","appendChild","onload","removeChild","forEach","event","_owAds","removeEventListener"],"sources":["C:/Users/bryan/Desktop/Mob/Projects Backup/Projects/my-app/src/features/monetization/hooks/useOverwolfAds.ts"],"sourcesContent":["import type { OwAd } from \"@overwolf/types/owads\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { INJECTED_OWADS_ID, OWADS_URL } from \"../constants\";\nimport { log } from \"lib/log\";\nimport { isDev, sleep } from \"lib/utils\";\n\ndeclare global {\n  interface Window {\n    OwAd?: typeof OwAd;\n  }\n}\n\nexport type UseOverwolfAds = Record<\"width\" | \"height\", number>;\n\nexport function useOverwolfAds({ width, height }: UseOverwolfAds) {\n  const containerRef = useRef<HTMLDivElement | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isPlaying, setIsPlaying] = useState(false);\n\n  useEffect(() => {\n    if (width === 0 || height === 0) {\n      log(\n        \"width === 0 || height === 0\",\n        \"src/features/monetization/hooks/useOverwolfAds.ts\",\n        \"useOverwolfAds\"\n      );\n\n      return;\n    }\n\n    let owAds: OwAd | undefined;\n    function onOwAdReady() {\n      if (\n        typeof window.OwAd === \"undefined\" ||\n        containerRef.current === null ||\n        isDev\n      ) {\n        return setIsLoading(false);\n      }\n      owAds = new window.OwAd(containerRef.current, {\n        size: { width, height },\n      });\n\n      owAds.addEventListener(\"player_loaded \", () => {\n        log(\n          \"player_loaded\",\n          \"src/features/monetization/hooks/useOverwolfAds.ts\",\n          \"useOverwolfAds\"\n        );\n      });\n\n      owAds.addEventListener(\"play\", () => {\n        setIsPlaying(true);\n      });\n\n      // owAds.addEventListener('display_ad_loaded', () => {\n      //   setIsPlaying(true);\n      // });\n\n      // owAds.addEventListener('impression', () => {\n      //   setIsPlaying(true);\n      // });\n\n      // owAds.addEventListener('complete', async () => {\n      //   await sleep(1000);\n      //   setIsPlaying(false);\n      // });\n      owAds.addEventListener(\"error\", async () => {\n        await sleep(1000);\n        setIsPlaying(false);\n      });\n    }\n\n    const script = document.createElement(\"script\");\n    script.id = INJECTED_OWADS_ID;\n\n    if (document.getElementById(INJECTED_OWADS_ID)) {\n      onOwAdReady();\n    } else {\n      script.src = OWADS_URL;\n      script.async = true;\n      document.body.appendChild(script);\n      script.onload = onOwAdReady;\n    }\n    return () => {\n      if (document.getElementById(INJECTED_OWADS_ID))\n        document.body.removeChild(script);\n      //remove event listeners if you enabled them\n      [\"player_loaded\", \"play\", \"display_ad_loaded\"].forEach((event) => {\n        owAds?.removeEventListener(event, () => {});\n      });\n    };\n  }, [width, height]);\n\n  return {\n    isLoading,\n    containerRef,\n    isPlaying,\n  };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}