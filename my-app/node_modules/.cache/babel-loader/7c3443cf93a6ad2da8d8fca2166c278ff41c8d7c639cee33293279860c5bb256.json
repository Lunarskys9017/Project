{"ast":null,"code":"function AuthEngine() {\n  this._internalStorage = {};\n  this.isLocalStorageEnabled = this._checkLocalStorageEnabled();\n}\nAuthEngine.prototype._checkLocalStorageEnabled = function () {\n  let err;\n  try {\n    // Safari, in Private Browsing Mode, looks like it supports localStorage but all calls to setItem\n    // throw QuotaExceededError. We're going to detect this and avoid hard to debug edge cases.\n    localStorage.setItem('__scLocalStorageTest', 1);\n    localStorage.removeItem('__scLocalStorageTest');\n  } catch (e) {\n    err = e;\n  }\n  return !err;\n};\nAuthEngine.prototype.saveToken = function (name, token, options) {\n  if (this.isLocalStorageEnabled) {\n    localStorage.setItem(name, token);\n  } else {\n    this._internalStorage[name] = token;\n  }\n  return Promise.resolve(token);\n};\nAuthEngine.prototype.removeToken = function (name) {\n  let loadPromise = this.loadToken(name);\n  if (this.isLocalStorageEnabled) {\n    localStorage.removeItem(name);\n  } else {\n    delete this._internalStorage[name];\n  }\n  return loadPromise;\n};\nAuthEngine.prototype.loadToken = function (name) {\n  let token;\n  if (this.isLocalStorageEnabled) {\n    token = localStorage.getItem(name);\n  } else {\n    token = this._internalStorage[name] || null;\n  }\n  return Promise.resolve(token);\n};\nmodule.exports = AuthEngine;","map":{"version":3,"names":["AuthEngine","_internalStorage","isLocalStorageEnabled","_checkLocalStorageEnabled","prototype","err","localStorage","setItem","removeItem","e","saveToken","name","token","options","Promise","resolve","removeToken","loadPromise","loadToken","getItem","module","exports"],"sources":["C:/Users/bryan/Desktop/Projects/my-app/node_modules/socketcluster-client/lib/auth.js"],"sourcesContent":["function AuthEngine() {\r\n  this._internalStorage = {};\r\n  this.isLocalStorageEnabled = this._checkLocalStorageEnabled();\r\n}\r\n\r\nAuthEngine.prototype._checkLocalStorageEnabled = function () {\r\n  let err;\r\n  try {\r\n    // Safari, in Private Browsing Mode, looks like it supports localStorage but all calls to setItem\r\n    // throw QuotaExceededError. We're going to detect this and avoid hard to debug edge cases.\r\n    localStorage.setItem('__scLocalStorageTest', 1);\r\n    localStorage.removeItem('__scLocalStorageTest');\r\n  } catch (e) {\r\n    err = e;\r\n  }\r\n  return !err;\r\n};\r\n\r\nAuthEngine.prototype.saveToken = function (name, token, options) {\r\n  if (this.isLocalStorageEnabled) {\r\n    localStorage.setItem(name, token);\r\n  } else {\r\n    this._internalStorage[name] = token;\r\n  }\r\n  return Promise.resolve(token);\r\n};\r\n\r\nAuthEngine.prototype.removeToken = function (name) {\r\n  let loadPromise = this.loadToken(name);\r\n\r\n  if (this.isLocalStorageEnabled) {\r\n    localStorage.removeItem(name);\r\n  } else {\r\n    delete this._internalStorage[name];\r\n  }\r\n\r\n  return loadPromise;\r\n};\r\n\r\nAuthEngine.prototype.loadToken = function (name) {\r\n  let token;\r\n\r\n  if (this.isLocalStorageEnabled) {\r\n    token = localStorage.getItem(name);\r\n  } else {\r\n    token = this._internalStorage[name] || null;\r\n  }\r\n\r\n  return Promise.resolve(token);\r\n};\r\n\r\nmodule.exports = AuthEngine;\r\n"],"mappings":"AAAA,SAASA,UAAUA,CAAA,EAAG;EACpB,IAAI,CAACC,gBAAgB,GAAG,CAAC,CAAC;EAC1B,IAAI,CAACC,qBAAqB,GAAG,IAAI,CAACC,yBAAyB,CAAC,CAAC;AAC/D;AAEAH,UAAU,CAACI,SAAS,CAACD,yBAAyB,GAAG,YAAY;EAC3D,IAAIE,GAAG;EACP,IAAI;IACF;IACA;IACAC,YAAY,CAACC,OAAO,CAAC,sBAAsB,EAAE,CAAC,CAAC;IAC/CD,YAAY,CAACE,UAAU,CAAC,sBAAsB,CAAC;EACjD,CAAC,CAAC,OAAOC,CAAC,EAAE;IACVJ,GAAG,GAAGI,CAAC;EACT;EACA,OAAO,CAACJ,GAAG;AACb,CAAC;AAEDL,UAAU,CAACI,SAAS,CAACM,SAAS,GAAG,UAAUC,IAAI,EAAEC,KAAK,EAAEC,OAAO,EAAE;EAC/D,IAAI,IAAI,CAACX,qBAAqB,EAAE;IAC9BI,YAAY,CAACC,OAAO,CAACI,IAAI,EAAEC,KAAK,CAAC;EACnC,CAAC,MAAM;IACL,IAAI,CAACX,gBAAgB,CAACU,IAAI,CAAC,GAAGC,KAAK;EACrC;EACA,OAAOE,OAAO,CAACC,OAAO,CAACH,KAAK,CAAC;AAC/B,CAAC;AAEDZ,UAAU,CAACI,SAAS,CAACY,WAAW,GAAG,UAAUL,IAAI,EAAE;EACjD,IAAIM,WAAW,GAAG,IAAI,CAACC,SAAS,CAACP,IAAI,CAAC;EAEtC,IAAI,IAAI,CAACT,qBAAqB,EAAE;IAC9BI,YAAY,CAACE,UAAU,CAACG,IAAI,CAAC;EAC/B,CAAC,MAAM;IACL,OAAO,IAAI,CAACV,gBAAgB,CAACU,IAAI,CAAC;EACpC;EAEA,OAAOM,WAAW;AACpB,CAAC;AAEDjB,UAAU,CAACI,SAAS,CAACc,SAAS,GAAG,UAAUP,IAAI,EAAE;EAC/C,IAAIC,KAAK;EAET,IAAI,IAAI,CAACV,qBAAqB,EAAE;IAC9BU,KAAK,GAAGN,YAAY,CAACa,OAAO,CAACR,IAAI,CAAC;EACpC,CAAC,MAAM;IACLC,KAAK,GAAG,IAAI,CAACX,gBAAgB,CAACU,IAAI,CAAC,IAAI,IAAI;EAC7C;EAEA,OAAOG,OAAO,CAACC,OAAO,CAACH,KAAK,CAAC;AAC/B,CAAC;AAEDQ,MAAM,CAACC,OAAO,GAAGrB,UAAU"},"metadata":{},"sourceType":"script","externalDependencies":[]}